{"version":3,"file":"commonHelpers.js","sources":["../src/js/constants.js","../src/main.js"],"sourcesContent":["export const CONSTANTS = {\n  API_KEY: '42384910-73277182c896d015737fb8e33',\n  API_URL: 'https://pixabay.com/api/',\n  ERROR_MESSAGES: {\n    EMPTY_INPUT: 'Input must not be empty. Please try again!',\n    IMAGES_NOT_FOUND:\n      'Sorry, there are no images matching your search query. Please try again!',\n    RESOURSE_ERROR: 'Requested resourse is not found!',\n  },\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { CONSTANTS } from './js/constants';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst popUpConfig = {\n  message: null,\n  iconUrl: '/img/error-icon.png',\n  messageColor: 'white',\n  backgroundColor: '#EF4040',\n  position: 'topRight',\n};\n\nconst searchParams = new URLSearchParams({\n  key: CONSTANTS.API_KEY,\n  q: null,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n});\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  const galleryLightBox = new SimpleLightbox('.gallery-photo a');\n\n  gallery.innerHTML = '';\n\n  if (!input.value) {\n    showErrorPopUp(CONSTANTS.ERROR_MESSAGES.EMPTY_INPUT);\n  } else {\n    loader.classList.remove('hidden');\n    searchParams.set('q', `${input.value}`);\n\n    fetch(`${CONSTANTS.API_URL}?${searchParams}`, {\n      headers: {\n        Accept: 'application/json',\n      },\n    })\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          loader.classList.add('hidden');\n          throw new Error(response.status);\n        }\n      })\n      .then(data => {\n        if (!data.hits.length) {\n          showErrorPopUp(CONSTANTS.ERROR_MESSAGES.IMAGES_NOT_FOUND);\n        } else {\n          gallery.insertAdjacentHTML('beforeend', htmlMarkupCreator(data.hits));\n          galleryLightBox.refresh();\n        }\n        loader.classList.add('hidden');\n      })\n      .catch(error => {\n        console.debug(error);\n        showErrorPopUp(CONSTANTS.ERROR_MESSAGES.RESOURSE_ERROR);\n      });\n  }\n});\n\nfunction htmlMarkupCreator(galleryItems) {\n  return galleryItems\n    .map(item => {\n      const {\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = item;\n      return `<li>\n      <div class=\"gallery-photo\">\n        <a href=\"${largeImageURL}\"\n          ><img src=\"${webformatURL}\" alt=\"${tags}\"\n        /></a>\n      </div>\n      <div class=\"text-wrapper\">\n        <div class=\"list-item-container\">\n          <p class=\"header-text\">likes</p>\n          <p>${likes}</p>\n        </div>\n        <div class=\"list-item-container\">\n          <p class=\"header-text\">Views</p>\n          <p>${views}</p>\n        </div>\n        <div class=\"list-item-container\">\n          <p class=\"header-text\">Comments</p>\n          <p>${comments}</p>\n        </div>\n        <div class=\"list-item-container\">\n          <p class=\"header-text\">Downloads</p>\n          <p>${downloads}</p>\n        </div>\n      </div>\n    </li>`;\n    })\n    .join('');\n}\n\nfunction showErrorPopUp(message) {\n  iziToast.show({\n    ...popUpConfig,\n    message,\n  });\n}\n"],"names":["CONSTANTS","form","input","gallery","loader","popUpConfig","searchParams","e","galleryLightBox","SimpleLightbox","response","data","htmlMarkupCreator","showErrorPopUp","error","galleryItems","item","largeImageURL","webformatURL","tags","likes","views","comments","downloads","message","iziToast"],"mappings":"6vBAAO,MAAMA,EAAY,CACvB,QAAS,qCACT,QAAS,2BACT,eAAgB,CACd,YAAa,6CACb,iBACE,2EACF,eAAgB,kCACjB,CACH,ECHMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAc,CAClB,QAAS,KACT,QAAS,sBACT,aAAc,QACd,gBAAiB,UACjB,SAAU,UACZ,EAEMC,EAAe,IAAI,gBAAgB,CACvC,IAAKN,EAAU,QACf,EAAG,KACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,CAAC,EAEDC,EAAK,iBAAiB,SAAUM,GAAK,CACnCA,EAAE,eAAc,EAChB,MAAMC,EAAkB,IAAIC,EAAe,kBAAkB,EAE7DN,EAAQ,UAAY,GAEfD,EAAM,OAGTE,EAAO,UAAU,OAAO,QAAQ,EAChCE,EAAa,IAAI,IAAK,GAAGJ,EAAM,KAAK,EAAE,EAEtC,MAAM,GAAGF,EAAU,OAAO,IAAIM,CAAY,GAAI,CAC5C,QAAS,CACP,OAAQ,kBACT,CACP,CAAK,EACE,KAAKI,GAAY,CAChB,GAAIA,EAAS,GACX,OAAOA,EAAS,OAEhB,MAAAN,EAAO,UAAU,IAAI,QAAQ,EACvB,IAAI,MAAMM,EAAS,MAAM,CAEzC,CAAO,EACA,KAAKC,GAAQ,CACPA,EAAK,KAAK,QAGbR,EAAQ,mBAAmB,YAAaS,EAAkBD,EAAK,IAAI,CAAC,EACpEH,EAAgB,QAAO,GAHvBK,EAAeb,EAAU,eAAe,gBAAgB,EAK1DI,EAAO,UAAU,IAAI,QAAQ,CACrC,CAAO,EACA,MAAMU,GAAS,CACd,QAAQ,MAAMA,CAAK,EACnBD,EAAeb,EAAU,eAAe,cAAc,CAC9D,CAAO,GA9BHa,EAAeb,EAAU,eAAe,WAAW,CAgCvD,CAAC,EAED,SAASY,EAAkBG,EAAc,CACvC,OAAOA,EACJ,IAAIC,GAAQ,CACX,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA;AAAA,mBAEMC,CAAa;AAAA,uBACTC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAMlCC,CAAK;AAAA;AAAA;AAAA;AAAA,eAILC,CAAK;AAAA;AAAA;AAAA;AAAA,eAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,eAIRC,CAAS;AAAA;AAAA;AAAA,UAIxB,CAAK,EACA,KAAK,EAAE,CACZ,CAEA,SAASV,EAAeW,EAAS,CAC/BC,EAAS,KAAK,CACZ,GAAGpB,EACH,QAAAmB,CACJ,CAAG,CACH"}